<!DOCTYPE html>
<html lang="kr" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>코딩랩 Rust 스터디 중간평가</title>

    <meta property="og:site_name" content="코딩랩 Rust 스터디 중간평가"/>
    <meta property="og:title" content="코딩랩 Rust 스터디 중간평가"/>
    <link rel="icon" href="./favicon.png"/>
    <style>
        @font-face { font-family: Miracode; src: url('/Miracode.ttf'); }
        @font-face { font-family: "Pretendard Variable"; src: url('/PretendardVariable.woff2'); }
    </style>
</head>
<body style="background-color: black">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/rust.min.js"></script>

<script>hljs.highlightAll();</script>
<p id="answer" style="display: none">QUESTION_ANSWER</p>
<div style="text-align: center; margin: auto; width: 80%">
    <p style="
        background-image: linear-gradient(to right, #FF5C0B, #FF1D70);
         text-align: left;
          font-family: 'Pretendard Variable',serif;
          font-weight: 600;
          font-size: 48px;
          color: transparent;
          background-clip: text;
          margin-bottom: 10px;
    ">Coding Lab 2025 Rust Study Midterm</p>
    <div style="margin-top: 0; width: 100%; height: 4px; background-image: linear-gradient(to right, #FF5C0B, #FF1D70)"></div>
    <div>
        <p style="text-align: left; font-family: 'Pretendard Variable',serif; font-weight: 200; color: white; font-size: 36px; margin-top: 40px">
            QUESTION_NAME
        </p>
        <p style="text-align: left; font-family: 'Pretendard Variable',serif; font-weight: 200; color: white; font-size: 24px; margin-top: 24px">
            QUESTION_DESCRIPTION
        </p>
        QUESTION_CODE
    </div>
    <form id="answer_form" style="text-align: left; color: white; margin-top: 20px; font-family: 'Pretendard Variable',serif; font-weight: 400; font-size: 20px;">
        QUESTION_CHOICES
    </form>
    <div style="text-align: left; margin-top: 20px">
        <button style="font-family: 'Pretendard Variable',serif; font-weight: 200; color: white; background-color: #FF5C0B; border: none; border-radius: 6px; font-size: 20px; padding: 5px 10px; margin-right: 5px; display: inline-block; float: left; cursor: pointer" onclick="updateAnswer(); goPrevious()">
            Previous
        </button>
        <button style="font-family: 'Pretendard Variable',serif; font-weight: 200; color: white; background-color: #FF1D70; border: none; border-radius: 6px; font-size: 20px; padding: 5px 10px; margin-left: 5px; display: inline-block; float: right; cursor: pointer" onclick="updateAnswer(); goNext()">
            Next
        </button>
        <p id=progress
           style="font-family: 'Pretendard Variable',serif; font-weight: 100; color: dimgray; display: inline-block; width: 100%; text-align: center">
            QUESTION_COUNT</p>
    </div>
</div>
<script>
    {
        let cookieObject = getCookie()
        if (cookieObject == null) {
            document.location.href = "./"
        } else {
            let sequence = cookieObject.sequence
            let pageNumber = parseInt(document.location.pathname.substring(1))
            let index = sequence.indexOf(pageNumber)
            let original = document.getElementById("progress")
            original.innerText = (index + 1) + "/" + original.innerText

            const savedAnswer = cookieObject.submitted[index]
            if (savedAnswer !== "") {
                const spaceIndex = savedAnswer.indexOf(" ")
                let selected
                let inputFieldValue = null

                if (spaceIndex > -1) {
                    selected = parseInt(savedAnswer.substring(0, spaceIndex))
                    inputFieldValue = savedAnswer.substring(spaceIndex + 1)
                } else {
                    selected = parseInt(savedAnswer)
                }

                const radioButtonId = "option" + selected
                const radioButton = document.getElementById(radioButtonId)
                radioButton.checked = true

                if (inputFieldValue != null) {
                    const inputFieldId = "option" + selected + "text"
                    const inputField = document.getElementById(inputFieldId)
                    inputField.value = inputFieldValue
                }
            }
        }
    }

    function updateAnswer() {
        const selected = document.querySelector('input[name="option"]:checked')
        if (selected == null) {
            return
        }

        const value = parseInt(selected.value)
        const pageNumber = parseInt(document.location.pathname.substring(1))
        const cookieObject = getCookie()
        const answerIndex = cookieObject.sequence.indexOf(pageNumber)
        const answer = document.getElementById("answer")

        const inputFieldId = "option" + value + "text"
        const inputField = document.getElementById(inputFieldId)

        let newAnswerValue
        if (inputField == null) {
            newAnswerValue = String(value)
        } else {
            newAnswerValue = value + " " + inputField.value
        }
        cookieObject.submitted[answerIndex] = newAnswerValue

        cookieObject.correct[answerIndex] = (cookieObject.submitted[answerIndex].trim() === answer.innerText.trim())

        setCookie(cookieObject)
    }

    function goNext() {
        const selected = document.querySelector('input[name="option"]:checked')
        if (selected == null) {
            return
        }

        const pageNumber = parseInt(document.location.pathname.substring(1))
        const cookieObject = getCookie()
        const sequenceIndex = cookieObject.sequence.indexOf(pageNumber)

        if (sequenceIndex === cookieObject.sequence.length - 1) {
            document.location.href = "./finish"
        } else {
            document.location.href = "./" + cookieObject.sequence[sequenceIndex + 1]
        }
    }

    function goPrevious() {
        const pageNumber = parseInt(document.location.pathname.substring(1))
        const cookieObject = getCookie()
        const sequenceIndex = cookieObject.sequence.indexOf(pageNumber)

        if (sequenceIndex !== 0) {
            document.location.href = "./" + cookieObject.sequence[sequenceIndex - 1]
        }
    }

    function setCookie(object) {
        document.cookie = "testSequence=" + encodeURIComponent(JSON.stringify(object.sequence))
        document.cookie = "testSubmitted=" + encodeURIComponent(JSON.stringify(object.submitted))
        document.cookie = "testCorrect=" + encodeURIComponent(JSON.stringify(object.correct))
    }

    function getCookie() {
        let testSequenceIndex = document.cookie.indexOf("testSequence=")
        let testSubmittedIndex = document.cookie.indexOf("testSubmitted=")
        let testCorrectIndex = document.cookie.indexOf("testCorrect=")
        if (testSequenceIndex === -1) {
            return null
        }
        if (testSubmittedIndex === -1) {
            return null
        }
        if (testCorrectIndex === -1) {
            return null
        }

        testSequenceIndex += "testSequence=".length
        testSubmittedIndex += "testSubmitted=".length
        testCorrectIndex += "testCorrect=".length

        const testSequenceString = decodeURIComponent(document.cookie.substring(testSequenceIndex).split(";")[0])
        const testSubmittedString = decodeURIComponent(document.cookie.substring(testSubmittedIndex).split(";")[0])
        const testCorrectString = decodeURIComponent(document.cookie.substring(testCorrectIndex).split(";")[0])

        const testSequence = JSON.parse(testSequenceString)
        const testSubmitted = JSON.parse(testSubmittedString)
        const testCorrect = JSON.parse(testCorrectString)

        return {
            sequence: testSequence,
            submitted: testSubmitted,
            correct: testCorrect,
        }
    }
</script>
</body>
</html>